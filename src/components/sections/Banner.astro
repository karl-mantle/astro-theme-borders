---
import type { SectionProps } from '../../types';
import Title from '../ui/Title.astro';
import Date from '../ui/Date.astro';
import Image from '../ui/Image.astro';
import Button from '../ui/Button.astro';

interface Props extends SectionProps {
  title: string,
  date?: Date,
  aspectRatio?: string,
  containImage?: boolean
};

const { title, titleTag = 'h2', description, date, image, alt = '', primaryButtonProps, secondaryButtonProps, aspectRatio, containImage = false }: Partial<Props> = Astro.props;
---

<section class:list={['not-prose grid grid-cols-1 mb-8 bg-theme-200 dark:bg-theme-800', image ? 'md:grid-cols-2' : '']}>

  { image && (
    <Image
      image={image}
      alt={alt}
      class="order-1 md:order-2"
      aspectRatio={aspectRatio}
      containImage={containImage}
    />
  )}

  <div class="order-2 md:order-1 flex flex-col gap-4 justify-center p-8 lg:py-8 lg:px-16">

    <Title titleTag={titleTag}>{title}</Title>

    { date &&  (
      <Date date={date} description="Post published on"/>
    )}

    { description && (
      <p class="text-theme-800 dark:text-theme-200">{description}</p>
    )}

    { (primaryButtonProps || secondaryButtonProps) && (
      <div class="flex flex-col lg:flex-row gap-4">
        { primaryButtonProps && (
          <Button {...primaryButtonProps} />
        )}
        { secondaryButtonProps && (
          <Button {...secondaryButtonProps} />
        )}
      </div>
    )}

    <slot />

  </div>
</section>
