---
import type { SectionProps } from '../../types';
import { THEME_CONTAINER_DESKTOP, THEME_CONTAINER_MOBILE } from '../../consts';
import Header from '../partials/Header.astro';

interface Props extends SectionProps {
  columns: number
}

const { title, titleTag = 'h2', description, primaryButtonProps, secondaryButtonProps, contained = true, columns, class: className, ...rest }: Partial<Props> = Astro.props;

let columnsCSS;
switch (columns) {
  case 1:
    columnsCSS = 'grid-cols-1';
    break;
  case 2:
    columnsCSS = 'grid-cols-1 md:grid-cols-2';
    break;
  case 3:
    columnsCSS = 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 md:[&>:last-child]:justify-self-center md:[&>:last-child]:col-span-2 md:[&>:last-child]:w-[50%] lg:[&>:last-child]:col-span-1 lg:[&>:last-child]:w-full';
    break;
  default:
    columnsCSS = 'grid-cols-1';
    break;
}
---

<section class:list={['flex flex-col mb-8', contained ? `${THEME_CONTAINER_DESKTOP} ${THEME_CONTAINER_MOBILE}` : '', className]} {...rest} >

  <Header
    title={title}
    titleTag={titleTag}
    description={description}
    primaryButtonProps={primaryButtonProps}
    secondaryButtonProps={secondaryButtonProps}
  />

  <div class:list={['grid gap-4 lg:gap-8', columnsCSS]}>
    <slot />
  </div>

</section>
